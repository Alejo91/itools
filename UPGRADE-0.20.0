*************************************************************************
itools 0.20.0
*************************************************************************

Imports
=======

The package "itools.xhtml" has been merged into "itools.html", and there
have been many naming normalizations.  Non exhaustive list follows:

  Before (alphabetical order)    Now
  ----------------------------   ---------------------------
  csv.CSV                        csv.CSVFile
  datatypes.InternetDateTime     datatypes.HTTPDate
  gettext.MO                     gettext.MOFile
  gettext.PO                     gettext.POFile
  handlers.Bzip2                 handlers.Bzip2File
  handlers.Config                handlers.ConfigFile
  handlers.escape_data           csv.escape_data
  handlers.fold_line             csv.fold_line
  handlers.Gzip                  handlers.GzipFile
  handlers.parse_table           csv.parse_table
  handlers.Property              csv.Property
  handlers.Record                csv.Record
  handlers.Table                 csv.Table
  handlers.TarArchive            handlers.TARFile
  handlers.Text                  handlers.TextFile
  handlers.ZipArchive            handlers.ZIPFile
  html.Document                  html.HTMLFile
  html.Parser                    html.HTMLParser
  odf.ODP                        odf.ODPFile
  odf.ODS                        odf.ODSFile
  odf.ODT                        odf.ODTFile
  odf.OOCalc                     odf.SXCFile
  odf.OOImpress                  odf.SXIFile
  odf.OOWriter                   odf.SXWFile
  pdf.PDF                        pdf.PDFFile
  rest.checkid                   handlers.checkid
  xhtml.Document                 html.XHTMLFile
  xhtml.elements_schema          html.elements_schema
  xhtml.sanitize_str             html.sanitize_str
  xhtml.sanitize_stream          html.sanitize_stream
  xhtml.stream_to_str_as_html    html.stream_to_str_as_html
  xhtml.stream_to_str_as_xhtml   html.stream_to_str_as_xhtml
  xhtml.xhtml_uri                html.xhtml_uri
  xml.Document                   xml.XMLFile
  xml.Parser                     xml.XMLParser

The "itools.schemas" package has been drop, use instead explicit schemas,
or the XML namespaces (depends on what you want to do, ask to the mailing
list for advice).


Packaging
=========

The "setup.conf" options have changed a little, rename the "description"
field to "title":

  # Before
  description = "The itools library"

  # Now
  title = "The itools library"


itools.catalog
==============

The abort method has been renamed to abort_changes:

  Catalog.abort()           # Before
  Catalog.abort_changes()   # Now

Before the fields to index (or store) were defined once and for all at
creation time with the "make_catalog" function.  Now they are defined
on a per object basis.  Also, the "get_catalog_indexes" method has been
renamed to "get_catalog_values".

  # Before
  make_catalog(path, TextField('title'), TextField('body'))

  class Document(CatalogAware):
      def get_catalog_indexes(self):
          return {'title': ..., 'body': ...}

  # Now
  make_catalog(path)

  class Document(CatalogAware):
      def get_catalog_fields(self):
          return [TextField('title'), TextField('body')]

      def get_catalog_values(self):
          return {'title': ..., 'body': ...}


itools.csv
==========

The "Row.set_value" method has been removed, use instead the new method
"CSVFile.update_row".

  # Before
  row = csv.get_row(index)
  csv.set_changed()
  row.set_value(name1, value1)
  row.set_value(name2, value2)

  # Now
  csv.update_row(index, name1=value1, name2=value2)

The new method, "update_row", takes care to set the csv file as dirty,
and updates the reverse indexes needed to search.

The advanced feature "IntegerKey" has been removed (if you need advanced
features, consider using the "Table" handler, which is, from a functional
point of view, a CSV on steroids).



** TODO **


itools.datatypes
================

From UTC to local time.


itools.gettext
==============
Remove gettext.PO.get_translation
Drop Domain from the public API
TODO


itools.handlers
===============

Do not use __slots__ anymore for handlers.
Now guess_encoding is a function.
TODO


itools.html
===========
raise XMLError


itools.rest
===========
Remove rest.to_xml rest.to_html rest.to_latex
TODO

itools.rss
==========
API refactor
TODO


itools.vfs
==========
Open modes changed:

  Before           Now             Posix
  ---------------  --------------  -----
  READ             READ (default)  rb
                   WRITE           wb
  WRITE (default)  READ_WRITE      r+b
  APPEND           APPEND          ab


itools.web
==========
Remove web.Context.get_accept_language
Remove "get_pathtoroot"
Now "build_form_value" and "check_form_input" require the datatype.

TODO

abspath attribute is now deprecated, it's replaced by get_abspath method which
returns a Path object.
Replace "context.handler" by "context.object".
