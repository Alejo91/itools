=============================================
Quickstart for an itools.cms Web application
=============================================

This quickstart "${PACKAGE_NAME}" is a sample itools.cms package, it provide:
  - the skeleton of a itools.cms Web Application
  - a mywebapp.tgz tarball with a piece of database to populate your application
  - illustration of the multisite feature : severals hostnames managed with one
    website.

${PACKAGE_NAME} was made by ``icms-make-package`` with the ``quickstart``
option::

  $ cd ${PACKAGE_PATH}
  $ icms-make-package.py -t quickstart ${PACKAGE_NAME}

  * Package "${PACKAGE_NAME}" created
  * ...

Setup an itools.cms Web application ${PACKAGE_NAME}
========================================================

Enter in your newly created package folder::

  $ cd ${PACKAGE}

Start by adding revision control to it::

  $ git-init
  $ git-add .
  $ git-commit

Install ${PACKAGE_NAME} in your python::

  $ ${ISETUP_BUILD}
  $ ${PYTHON} setup.py install

Now get out from your ${PACKAGE_NAME} package folder, and create a Database
instance "myDB". Option are: -w for passwd and -e for login (an email)::

  $ cd ~/
  $ ${ICMS_INIT} -w a -e toto@gmail.com myDB

Edit the config.conf file (to informe the myDB database about your package)::

  $ vi myDB/config.conf
  $ grep -E 'modules|port' myDB/config.conf
  modules = ${PACKAGE_NAME}
  port = 8080

Starts a web server that publishes the database instance::

  $ ${ICMS_START} myDB

Point firefox  to::

  http://localhost:8080/

Populate the database with ``mywebapp.tgz``
===========================================

Stop the server, populate the database, update the catalog and restart
the server::

  $ ${ICMS_STOP} myDB
  $ tar -xzf ${PACKAGE}/data/mywebapp.tgz -C myDB/database

  $ ${ICMS_UPDATE_CATALOG} myDB
  $ ${ICMS_START} myDB

The database is a filesystem tree::

  $ tree myDB/database/mywebapp/
  |-- contact-form
  |-- contact-form.metadata
  |-- home
  |   |-- left.xhtml
  |   |-- left.xhtml.metadata
  |   |-- right.xhtml
  |   `-- right.xhtml.metadata
  |-- home.metadata
  |-- ikaaro
  |-- ikaaro.metadata
  |-- techno
  |   |-- git
  |   |   |-- index.xhtml
  |   |   `-- index.xhtml.metadata
  |   |-- git.metadata
  |   |-- index.xhtml
  |   |-- index.xhtml.metadata
  |   |-- python
  |   |   |-- index.xhtml
  |   |   `-- index.xhtml.metadata
  |   `-- python.metadata
  `-- techno.metadata


Manage severals hostnames with one WEB Application
===================================================

Add example.localhost into /etc/hosts::

  $ grep 'example.toto.com' /etc/hosts
  127.0.0.1 localhost example.toto.com

  $ point a firefox tab to http://localhost:8080/         the backoffice
  $ point a firefox tab to http://example.toto.com:8080/  a frontoffice
